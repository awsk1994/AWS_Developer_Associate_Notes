# EC2 Fundamentals

## AWS Budget Setup

* Top right (user) -> Billing and Cost Management
* By default, your normal (non-root user) account won't have permissions for "Billing and Cost Management". To fix this:
    * In your root user account: Top right (user) -> Accounts -> Billing and Payments -> IAM and role access to Billing Information -> "Activate IAM access"
<img src="./img/5_EC2/1.png">



## Set up Budget

* In Billing page, "Budgets and Planning" -> Budgets -> "Create a Budget" -> "zero spend budget" -> create budget

## EC2 Basics

<img src="./img/5_EC2/2.png">

### EC2 User Data
* It is possible to bootstrap our instances using an EC2 User Data script
* Bootstrapping means launching commands when a machine starts
* The script is only run once at the instance first start
* EC2 user data is used to automate boot tasks, such as:
    * installing updates
    * installing software
    * downloading common files from the internet
    * anything you can think of
* The EC2 User Data Script runs with the root user

### EC2 Instance types

<img src="./img/5_EC2/3.png">

## Hands on

* We'll be launching our first virtual server using the AWS console
* We'll get a first high-level approach to the various parameters
* We'll see that our web server is launched using EC2 user data
* We'll learn how to start/stop.terminal our instance

### Notes

* EC2 -> launch instance
    * Key Pair (Login)
        * needed if you will ssh into the VM in the future
        * Create new key pair -> RSA -> .pem (mac/linux) or .ppk (windows version > 8)
    * Network
        * Tick "Allow HTTP traffic from the internet"
    *Advanced -> User Data
        * This is a script that will run when the OS starts (and only once (in the entire lifecycle))
        * Paste this:
```
#!/bin/bash
yum update -y
yum install -y httpd
systemctl start httpd
systemctl enable httpd
echo "<h1>Hello world from $(hostname -f)</h1>" > /var/www/html/index.html
```

* Find your newly created EC2 -> Networking -> Copy "Public IPv4 address" -> in a new tab, enter "http://{IPv4 address}"
    * Note: HTTP not HTTPS

* Stop/Turn off instance
    * Instance State -> Stop Instance -> Instance State -> Terminate Instance

## EC2 Instance Type Basics
* Overview
    * You can use different types of EC2 instances that are optimised for different use cases
    * AWS has the following naming convention: `m5.2xlarge`
        * `m` : instance class
        * `5` : generation (AWS improves them over time)
        * `2xlarge` : size within the instance class; basically the bigger the larger
* Types
    * General Purpose
        * Great divertiy of workloads, such as web servers or code repositories
        * In this course, we used t2.micro; which is a General Purpose EC2 instance
    * Compute Optimized
        * Great for compute-intensive tasks that require high performance processors:
            * Batch processing workloads
            * Media transcoding
            * High performance web servers
            * High performance computing (HPC)
            * Scientific Modeling & Machine Learning
            * Dedicated Gaming Servers
    * Memory Optimized
        * Fast performance for workloads that process large data sets in memory
        * Use cases:
            * High performance, relational/non-relational databases
            * Distributed web scale cache stores
            * In-memory databases optimized for BI (Business Intelligence)
            * Applications peforming real-time processing of big unstructurered data
    * Storage Optimized
        * Great for storage-intensive tasks that require high, sequential read and write access to large data set on local storage
        * Use cases:
            * High frequency online transaction processing (OLTP) systems
            * Relational & NoSQL databases
            * Cache for in-memory databses (eg. Redis)
            * Data warehousing applications
            * Distributed file systems

<img src="./img/5_EC2/4.png">
